From 2e07e675080912182be82b80ad6b49cad05667bf Mon Sep 17 00:00:00 2001
From: Carl Steinbach <carl@cloudera.com>
Date: Fri, 27 Jan 2012 14:46:25 -0800
Subject: [PATCH 18/58] HIVE-2760. TestCliDriver should log elapsed time

Reason: Improvement
Author: Carl Steinbach
Ref: CDH-4299
---
 ql/src/test/templates/TestCliDriver.vm |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/src/ql/src/test/templates/TestCliDriver.vm b/src/ql/src/test/templates/TestCliDriver.vm
index 31e7cd2..981dbe1 100644
--- a/src/ql/src/test/templates/TestCliDriver.vm
+++ b/src/ql/src/test/templates/TestCliDriver.vm
@@ -103,6 +103,7 @@ public class $className extends TestCase {
   #set ($eidx = $fname.indexOf('.'))
   #set ($tname = $fname.substring(0, $eidx))
   public void testCliDriver_$tname() throws Exception {
+    long startTime = System.currentTimeMillis();
     try {
       System.out.println("Begin query: " + "$fname");
 
@@ -142,11 +143,13 @@ public class $className extends TestCase {
     catch (Throwable e) {
       System.out.println("Exception: " + e.getMessage());
       e.printStackTrace();
+      System.out.println("Failed query: " + "$fname");
       System.out.flush();
       fail("Unexpected exception" + debugHint);
     }
 
-    System.out.println("Done query: " + "$fname");
+    long elapsedTime = System.currentTimeMillis() - startTime;
+    System.out.println("Done query: " + "$fname" + " elapsedTime=" + elapsedTime/1000 + "s");
     assertTrue("Test passed", true);
   }
 
-- 
1.7.0.4

