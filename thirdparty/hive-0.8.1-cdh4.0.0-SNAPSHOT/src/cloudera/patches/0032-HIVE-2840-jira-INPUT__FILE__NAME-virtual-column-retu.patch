From c660afa7ede810cf515653eb6486037b6b1b3949 Mon Sep 17 00:00:00 2001
From: Carl Steinbach <carl@cloudera.com>
Date: Mon, 5 Mar 2012 20:23:16 -0800
Subject: [PATCH 32/58] HIVE-2840 [jira] INPUT__FILE__NAME virtual column returns unqualified paths on Hadoop 0.23

Reason: Bug
Author: Carl Steinbach
Ref: CDH-4242
---
 .../hive/ql/io/HiveContextAwareRecordReader.java   |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/src/ql/src/java/org/apache/hadoop/hive/ql/io/HiveContextAwareRecordReader.java b/src/ql/src/java/org/apache/hadoop/hive/ql/io/HiveContextAwareRecordReader.java
index f05722a..424d636 100644
--- a/src/ql/src/java/org/apache/hadoop/hive/ql/io/HiveContextAwareRecordReader.java
+++ b/src/ql/src/java/org/apache/hadoop/hive/ql/io/HiveContextAwareRecordReader.java
@@ -183,7 +183,7 @@ public abstract class HiveContextAwareRecordReader<K, V> implements RecordReader
       blockStart = in.getPosition();
       in.close();
     }
-    this.initIOContext(blockStart, blockPointer, split.getPath().toString());
+    this.initIOContext(blockStart, blockPointer, path.makeQualified(fs).toString());
 
     this.initIOContextSortedProps(split, recordReader, job);
   }
-- 
1.7.0.4

