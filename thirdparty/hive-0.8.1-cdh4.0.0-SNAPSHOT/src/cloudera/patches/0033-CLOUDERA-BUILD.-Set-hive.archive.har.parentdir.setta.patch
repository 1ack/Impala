From 886a93a5fc63f00a285c0850627ec2bd16a177eb Mon Sep 17 00:00:00 2001
From: Carl Steinbach <carl@cloudera.com>
Date: Thu, 8 Mar 2012 02:55:28 -0800
Subject: [PATCH 33/58] CLOUDERA-BUILD. Set hive.archive.har.parentdir.settable=true in HiveConf

Reason: Bug
Author: Carl Steinbach
Ref: CDH-4765
---
 .../java/org/apache/hadoop/hive/conf/HiveConf.java |    2 +-
 conf/hive-default.xml.template                     |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java b/src/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java
index d2000d4..162ce75 100644
--- a/src/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java
+++ b/src/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java
@@ -502,7 +502,7 @@ public class HiveConf extends Configuration {
 
     // For har files
     HIVEARCHIVEENABLED("hive.archive.enabled", false),
-    HIVEHARPARENTDIRSETTABLE("hive.archive.har.parentdir.settable", false),
+    HIVEHARPARENTDIRSETTABLE("hive.archive.har.parentdir.settable", true),
 
     //Enable/Disable gbToIdx rewrite rule
     HIVEOPTGBYUSINGINDEX("hive.optimize.index.groupby", false),
diff --git a/src/conf/hive-default.xml.template b/src/conf/hive-default.xml.template
index 7e17c69..d1a7dc4 100644
--- a/src/conf/hive-default.xml.template
+++ b/src/conf/hive-default.xml.template
@@ -923,7 +923,7 @@
 
 <property>
   <name>hive.archive.har.parentdir.settable</name>
-  <value>false</value>
+  <value>true</value>
   <description>In new Hadoop versions, the parent directory must be set while
   creating a HAR. Because this functionality is hard to detect with just version
   numbers, this conf var needs to be set manually.</description>
-- 
1.7.0.4

