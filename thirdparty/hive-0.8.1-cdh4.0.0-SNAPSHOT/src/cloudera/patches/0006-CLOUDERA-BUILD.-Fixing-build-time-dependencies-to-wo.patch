From 5cd97c7974ef31ec9643522d8765205d7b28848f Mon Sep 17 00:00:00 2001
From: Andrew Bayer <andrew@cloudera.com>
Date: Mon, 9 Jan 2012 10:44:58 -0800
Subject: [PATCH 06/58] CLOUDERA-BUILD. Fixing build-time dependencies to work with Hadoop
 tarball layout.

---
 build.properties |    2 +-
 shims/build.xml  |    1 +
 2 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/src/build.properties b/src/build.properties
index 169dc73..f5a99e7 100644
--- a/src/build.properties
+++ b/src/build.properties
@@ -37,7 +37,7 @@ hadoop.common.jar=${hadoop.root}/share/hadoop/common/hadoop-common-${hadoop.vers
 hadoop.common.test.jar=${hadoop.root}/share/hadoop/common/hadoop-common-${hadoop.version.ant-internal}-tests.jar
 hadoop.hdfs.jar=${hadoop.root}/share/hadoop/hdfs/hadoop-hdfs-${hadoop.version.ant-internal}.jar
 hadoop.hdfs.test.jar=${hadoop.root}/share/hadoop/hdfs/hadoop-hdfs-${hadoop.version.ant-internal}-tests.jar
-hadoop.mapreduce.jar=${hadoop.root}/modules/hadoop-mapreduce-client-core-${hadoop.version.ant-internal}.jar
+hadoop.mapreduce.jar=${hadoop.root}/share/hadoop/mapreduce/hadoop-mapreduce-client-core-${hadoop.version.ant-internal}.jar
 hadoop.mapreduce.test.jar=${hadoop.root}/hadoop-mapreduce-test-${hadoop.version.ant-internal}.jar
 hadoop.mapreduce.tools.jar=${hadoop.root}/hadoop-mapreduce-tools-${hadoop.version.ant-internal}.jar
 
diff --git a/src/shims/build.xml b/src/shims/build.xml
index 850c791..a4dbac3 100644
--- a/src/shims/build.xml
+++ b/src/shims/build.xml
@@ -31,6 +31,7 @@ to call at top-level: ant deploy-contrib compile-core-test
       <exclude name="lib/**/excluded/" />
       <!-- below is for 0.23 onwards -->
       <include name="share/hadoop/common/lib/*.jar" />
+      <include name="share/hadoop/tools/lib/*.jar" />
       <exclude name="share/hadoop/common/lib/hadoop-mapreduce-*.jar" />
       <exclude name="share/hadoop/common/lib/hadoop-yarn-*.jar" />
     </fileset>
-- 
1.7.0.4

