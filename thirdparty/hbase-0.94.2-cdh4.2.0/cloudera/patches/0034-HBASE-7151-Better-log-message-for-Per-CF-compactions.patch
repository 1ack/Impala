From 695dbd8c4b2d10196d1e161d929f5d4c08f47e8d Mon Sep 17 00:00:00 2001
From: Gregory Chanan <gchanan@cloudera.com>
Date: Mon, 12 Nov 2012 15:32:49 -0800
Subject: [PATCH 034/202] HBASE-7151 Better log message for Per-CF compactions

Reason: Supportability
Author: Gregory Chanan
Ref: CDH-7570
---
 .../hadoop/hbase/regionserver/HRegionServer.java   |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java b/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java
index 720c9d4..15ae9d3 100644
--- a/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java
+++ b/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java
@@ -2979,9 +2979,10 @@ public class HRegionServer implements HRegionInterface, HBaseRPCErrorHandler,
         region.triggerMajorCompaction();
       }
     }
+    String familyLogMsg = (family != null)?" for column family: " + Bytes.toString(family):"";
     LOG.trace("User-triggered compaction requested for region " +
-      region.getRegionNameAsString());
-    String log = "User-triggered " + (major ? "major " : "") + "compaction";
+      region.getRegionNameAsString() + familyLogMsg);
+    String log = "User-triggered " + (major ? "major " : "") + "compaction" + familyLogMsg;
     if (family != null) {
       compactSplitThread.requestCompaction(region, store, log,
         Store.PRIORITY_USER);
-- 
1.7.0.4

