From bd3a21d8e191a33efc2ee3c3683ca4ecb96d50bb Mon Sep 17 00:00:00 2001
From: Jimmy Xiang <jxiang@cloudera.com>
Date: Mon, 12 Nov 2012 14:37:43 -0800
Subject: [PATCH 035/202] HBASE-7152 testShouldCheckMasterFailOverWhenMETAIsInOpenedState times out occasionally

Reason: test
Author: Jimmy Xiang
Ref: CDH-8819
---
 .../hadoop/hbase/master/TestMasterFailover.java    |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java b/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java
index 14cdb90..898f7c0 100644
--- a/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java
+++ b/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java
@@ -97,6 +97,10 @@ public class TestMasterFailover {
     LOG.info("Staring cluster for second time");
     TEST_UTIL.startMiniHBaseCluster(NUM_MASTERS, NUM_RS);
 
+    HMaster master = TEST_UTIL.getHBaseCluster().getMaster();
+    while (!master.isInitialized()) {
+      Thread.sleep(100);
+    }
     // Failover should be completed, now wait for no RIT
     log("Waiting for no more RIT");
     ZKAssign.blockUntilNoRIT(zkw);
-- 
1.7.0.4

