From 95c4de170a1817b898dcde25e788e77c65771586 Mon Sep 17 00:00:00 2001
From: Matteo Bertozzi <matteo.bertozzi@cloudera.com>
Date: Mon, 21 Jan 2013 08:00:15 -0800
Subject: [PATCH 172/196] HBASE-7627 UnsupportedOperationException in CatalogJanitor thread

Reason: Snapshots
Author: Jonathan Hsieh
Ref: CDH-9551
---
 .../apache/hadoop/hbase/catalog/MetaEditor.java    |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/src/main/java/org/apache/hadoop/hbase/catalog/MetaEditor.java b/src/main/java/org/apache/hadoop/hbase/catalog/MetaEditor.java
index 367c033..2e91661 100644
--- a/src/main/java/org/apache/hadoop/hbase/catalog/MetaEditor.java
+++ b/src/main/java/org/apache/hadoop/hbase/catalog/MetaEditor.java
@@ -129,13 +129,15 @@ public class MetaEditor {
    */
   static void deleteFromMetaTable(final CatalogTracker ct, final Delete d)
       throws IOException {
-    deleteFromMetaTable(ct, Arrays.asList(d));
+    List<Delete> dels = new ArrayList<Delete>(1);
+    dels.add(d);
+    deleteFromMetaTable(ct, dels);
   }
 
   /**
    * Delete the passed <code>deletes</code> from the <code>.META.</code> table.
    * @param ct CatalogTracker on whose back we will ride the edit.
-   * @param deletes Deletes to add to .META.
+   * @param deletes Deletes to add to .META.  This list should support #remove.
    * @throws IOException
    */
   static void deleteFromMetaTable(final CatalogTracker ct, final List<Delete> deletes)
-- 
1.7.0.4

