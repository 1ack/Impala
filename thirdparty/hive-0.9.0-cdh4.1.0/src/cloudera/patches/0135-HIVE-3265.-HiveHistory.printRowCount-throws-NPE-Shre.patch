From 9341acab6ae7f15cc8702946f7a809d8187ae2d0 Mon Sep 17 00:00:00 2001
From: Carl Steinbach <cws@apache.org>
Date: Wed, 29 Aug 2012 08:06:38 +0000
Subject: [PATCH 135/144] HIVE-3265. HiveHistory.printRowCount() throws NPE (Shreepadma Venugopalan via cws)

git-svn-id: https://svn.apache.org/repos/asf/hive/trunk@1378472 13f79535-47bb-0310-9956-ffa450edef68
(cherry picked from commit 4c14682e0835b171d169d377bd8ea20d0b76c232)
---
 .../apache/hadoop/hive/ql/history/HiveHistory.java |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/src/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java b/src/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java
index e2f3ea5..7e80c2d 100644
--- a/src/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java
+++ b/src/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java
@@ -409,6 +409,9 @@ public class HiveHistory {
 
   public void printRowCount(String queryId) {
     QueryInfo ji = queryInfoMap.get(queryId);
+    if (ji == null) {
+      return;
+    }
     for (String tab : ji.rowCountMap.keySet()) {
       console.printInfo(ji.rowCountMap.get(tab) + " Rows loaded to " + tab);
     }
@@ -420,7 +423,6 @@ public class HiveHistory {
    * @param queryId
    */
   public void endQuery(String queryId) {
-
     QueryInfo ji = queryInfoMap.get(queryId);
     if (ji == null) {
       return;
-- 
1.7.0.4

