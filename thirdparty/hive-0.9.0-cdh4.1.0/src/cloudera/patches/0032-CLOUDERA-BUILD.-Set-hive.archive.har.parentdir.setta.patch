From a6f75878fbc3eed82e71b0c657e94c6010935746 Mon Sep 17 00:00:00 2001
From: Zhenxiao Luo <zhenxiao@cloudera.com>
Date: Mon, 18 Jun 2012 18:40:37 -0700
Subject: [PATCH 032/144] CLOUDERA-BUILD. Set hive.archive.har.parentdir.settable=true in HiveConf

Reason: Bug
Author: Carl Steinbach
Ref: CDH-4765
---
 .../java/org/apache/hadoop/hive/conf/HiveConf.java |    2 +-
 conf/hive-default.xml.template                     |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java b/src/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java
index 19fee64..c0c6bc4 100644
--- a/src/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java
+++ b/src/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java
@@ -519,7 +519,7 @@ public class HiveConf extends Configuration {
 
     // For har files
     HIVEARCHIVEENABLED("hive.archive.enabled", false),
-    HIVEHARPARENTDIRSETTABLE("hive.archive.har.parentdir.settable", false),
+    HIVEHARPARENTDIRSETTABLE("hive.archive.har.parentdir.settable", true),
 
     //Enable/Disable gbToIdx rewrite rule
     HIVEOPTGBYUSINGINDEX("hive.optimize.index.groupby", false),
diff --git a/src/conf/hive-default.xml.template b/src/conf/hive-default.xml.template
index 1f6796e..5ab41b6 100644
--- a/src/conf/hive-default.xml.template
+++ b/src/conf/hive-default.xml.template
@@ -959,7 +959,7 @@
 
 <property>
   <name>hive.archive.har.parentdir.settable</name>
-  <value>false</value>
+  <value>true</value>
   <description>In new Hadoop versions, the parent directory must be set while
   creating a HAR. Because this functionality is hard to detect with just version
   numbers, this conf var needs to be set manually.</description>
-- 
1.7.0.4

