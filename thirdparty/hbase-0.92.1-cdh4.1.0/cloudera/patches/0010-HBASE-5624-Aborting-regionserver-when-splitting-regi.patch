From 4f45f481292f1c1205bd22a1da8cd86c4febbad7 Mon Sep 17 00:00:00 2001
From: Gregory Chanan <gchanan@cloudera.com>
Date: Thu, 29 Mar 2012 11:58:37 -0700
Subject: [PATCH 010/154] HBASE-5624 Aborting regionserver when splitting region, may cause daughter region not assigned by ServerShutdownHandler

Reason: Bug
Author: Gregory Chanan
Ref: CDH-4754

git-svn-id: https://svn.apache.org/repos/asf/hbase/branches/0.92@1304606 13f79535-47bb-0310-9956-ffa450edef68

Conflicts:

	CHANGES.txt
---
 .../hbase/regionserver/SplitTransaction.java       |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java b/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java
index 38aada9..9926f01 100644
--- a/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java
+++ b/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java
@@ -338,9 +338,9 @@ public class SplitTransaction {
     if (stopped || stopping) {
       // add 2nd daughter first (see HBASE-4335)
       MetaEditor.addDaughter(server.getCatalogTracker(),
-          b.getRegionInfo(), null);
+          b.getRegionInfo(), services.getServerName());
       MetaEditor.addDaughter(server.getCatalogTracker(),
-          a.getRegionInfo(), null);
+          a.getRegionInfo(), services.getServerName());
       LOG.info("Not opening daughters " +
           b.getRegionInfo().getRegionNameAsString() +
           " and " +
-- 
1.7.0.4

