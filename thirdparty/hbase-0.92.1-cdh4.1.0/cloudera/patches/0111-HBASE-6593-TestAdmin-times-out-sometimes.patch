From eddd55c90c98ce4156db329e2b6e06704f596074 Mon Sep 17 00:00:00 2001
From: Jimmy Xiang <jxiang@cloudera.com>
Date: Wed, 15 Aug 2012 16:30:00 -0700
Subject: [PATCH 111/151] HBASE-6593 TestAdmin times out sometimes

Reason: Test
Author: Jimmy Xiang
Ref: CDH-7349
---
 .../org/apache/hadoop/hbase/client/TestAdmin.java  |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java b/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java
index da79a81..f05e095 100644
--- a/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java
+++ b/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java
@@ -782,16 +782,19 @@ public class TestAdmin {
       numVersions, blockSize);
     try {
       int rowCount = 0;
+      byte[] q = new byte[0];
 
       // insert rows into column families. The number of rows that have values
       // in a specific column family is decided by rowCounts[familyIndex]
       for (int index = 0; index < familyNames.length; index++) {
+        ArrayList<Put> puts = new ArrayList<Put>(rowCounts[index]);
         for (int i = 0; i < rowCounts[index]; i++) {
           byte[] k = Bytes.toBytes(i);
           Put put = new Put(k);
-          put.add(familyNames[index], new byte[0], k);
-          table.put(put);
+          put.add(familyNames[index], q, k);
+          puts.add(put);
         }
+        table.put(puts);
 
         if ( rowCount < rowCounts[index] ) {
           rowCount = rowCounts[index];
-- 
1.7.0.4

