From dfeaed4b5f4d203a3a692dcd18b7588bfe48a27d Mon Sep 17 00:00:00 2001
From: Jimmy Xiang <jxiang@cloudera.com>
Date: Fri, 25 May 2012 09:37:18 -0700
Subject: [PATCH 052/151] HBASE-6095 ActiveMasterManager NullPointerException

Reason: Bug
Author: Jimmy Xiang
Ref: CDH-6041
---
 .../hadoop/hbase/master/ActiveMasterManager.java   |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java b/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java
index 96754d2..178edb3 100644
--- a/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java
+++ b/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java
@@ -237,7 +237,7 @@ class ActiveMasterManager extends ZooKeeperListener {
       byte [] bytes =
         ZKUtil.getDataAndWatch(watcher, watcher.masterAddressZNode);
       // TODO: redo this to make it atomic (only added for tests)
-      ServerName master = ServerName.parseVersionedServerName(bytes);
+      ServerName master = bytes == null ? null : ServerName.parseVersionedServerName(bytes);
       if (master != null &&  master.equals(this.sn)) {
         ZKUtil.deleteNode(watcher, watcher.masterAddressZNode);
       }
-- 
1.7.0.4

