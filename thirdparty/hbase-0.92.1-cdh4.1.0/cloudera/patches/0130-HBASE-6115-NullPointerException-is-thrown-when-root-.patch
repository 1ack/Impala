From b6efce82cd82697f0dc35ca43a918bdebe75354d Mon Sep 17 00:00:00 2001
From: Ramkrishna S. Vasudevan <ramkrishna@apache.org>
Date: Tue, 29 May 2012 16:22:47 +0000
Subject: [PATCH 130/154] HBASE-6115 NullPointerException is thrown when root and meta table regions are assigning to another RS. (Ram)

Reason: Bug
Author: ramkrishna.s.vasudevan
Ref: CDH-5549
---
 .../hadoop/hbase/client/HConnectionManager.java    |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java b/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java
index bd8cf90..675fbeb 100644
--- a/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java
+++ b/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java
@@ -819,7 +819,7 @@ public class HConnectionManager {
       ensureZookeeperTrackers();
       if (Bytes.equals(tableName, HConstants.ROOT_TABLE_NAME)) {
         try {
-          ServerName servername = this.rootRegionTracker.getRootRegionLocation();
+          ServerName servername = this.rootRegionTracker.waitRootRegionLocation(this.rpcTimeout);
           LOG.debug("Looked up root region location, connection=" + this +
             "; serverName=" + ((servername == null)? "": servername.toString()));
           if (servername == null) return null;
-- 
1.7.0.4

